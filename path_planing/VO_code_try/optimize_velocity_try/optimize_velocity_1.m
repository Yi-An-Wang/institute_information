L=12;
cmd=[10; 6; 8; 5.5];
w=[0.1 0.1 12];
v_org=[9; 0.5; 9; -0.5];
delta_v_max=[10; 0.3; 10; 0.3];
v_max=[30; 30];
obj=@(act) obj_function(act,cmd,L,w);
A=[];
b=[];
Aeq=[1 0 -1 0];
beq=0;
ub=[30; 30; 30; 30];
lb=[-30; -30; -30; -30];
nonlcon=@(act) nonlcon_function(act,v_org,delta_v_max,v_max);
[act,fval,exitflag,output]=fmincon(obj,v_org,A,b,Aeq,beq,lb,ub,nonlcon);
H_f=[1/2 0 1/2 0; 0 1/2 0 1/2; 0 1/L 0 -1/L];
V_cmd=H_f*cmd;
V_act=H_f*act;